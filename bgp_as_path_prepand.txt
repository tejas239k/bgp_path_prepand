R1
enable
configure terminal
hostname R1
interface fa1/0
ip address 15.1.1.1 255.255.255.0
no shutdown
exit
interface fa0/0
ip address 45.1.1.1 255.255.255.0
no shutdown
exit
router bgp 100
neighbor 15.1.1.2 remote-as 200
neighbor 45.1.1.4 remote-as 300
exit

R2
enable
configure terminal
hostname R2
interface fa1/0
ip address 15.1.1.2 255.255.255.0
no shutdown
exit
interface fa0/0
ip address 25.1.1.2 255.255.255.0
no shutdown
exit
router bgp 200
neighbor 15.1.1.1 remote-as 100
neighbor 25.1.1.3 remote-as 200
exit


R3
enable
configure terminal
hostname R3
interface fa1/0
ip address 35.1.1.3 255.255.255.0
no shutdown
exit
interface fa0/0
ip address 25.1.1.3 255.255.255.0
no shutdown
exit
router bgp 200
neighbor 35.1.1.4 remote-as 300
neighbor 25.1.1.2 remote-as 200
exit

R4
enable
configure terminal
hostname R4
interface fa1/0
ip address 35.1.1.4 255.255.255.0
no shutdown
exit
interface fa0/0
ip address 45.1.1.4 255.255.255.0
no shutdown
exit
interface loopback 0
ip address 4.4.4.4 255.255.255.0
no shutdown
exit
router bgp 300
neighbor 35.1.1.3 remote-as 200
neighbor 45.1.1.1 remote-as 100
network 4.4.4.0 mask 255.255.255.0
exit
route-map path_prepand
set as-path prepand 1 2 3 4 5 6
exit
router bgp 300
neighbor 35.1.1.3 route-map path_prepand out
exit

